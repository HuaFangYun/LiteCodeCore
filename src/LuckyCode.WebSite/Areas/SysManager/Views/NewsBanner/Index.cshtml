 @{ ViewBag.Title = "Banner管理"; }
<div class="content-wrapper" id='bannerApp'>
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Banner管理
        </h1>
        <ol class="breadcrumb">
            <li><a href="/SysManager/Home"><i class="fa fa-dashboard"></i> 主页</a></li>
            <li class="active">Banner管理</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-md-12">
                <div class="box box-success">
                    <div class="box-header">
                        <a v-on:click="addBannerModal" class="btn bg-maroon btn-sm btn-flat "><i class="glyphicon glyphicon-plus"></i>添加</a>
                    </div>
                    <div class="box-body">
                        <table id="Sys_DataGrid" class="table table-hover table-striped table-bordered">
                            <tr>
                                <th>标题</th>
                                <th>链接</th>
                                <th>创建时间</th>
                                <th>操作</th>
                            </tr>
                            <tr v-for='item in banners'>
                                <td>{{item.Title}}</td>
                                <td>{{item.Url}}</td>
                                <td>{{item.CreateTime|dateFormat('YYYY-MM-DD HH:mm')}}</td>
                                <td>
                                    <a class='btn btn-flat btn-xs btn-info' v-on:click="editBannerModal(item)"><i class='glyphicon glyphicon-pencil'></i>编辑</a>
                                    <a v-on:click="deleteBanner(item.Id)" class='btn btn-flat btn-xs btn-warning'><i class='glyphicon glyphicon-remove'></i>删除</a>
                                </td>
                            </tr>
                        </table>
                        <pagebar v-bind:current-page-index="currentPageIndex" v-bind:total-row-count="totalRowCount" v-bind:page-size="pageSize"
                            v-on:paged="pageChange"></pagebar>
                    </div>
                </div>
            </div>
        </div>

        <!--pop-->
        <div class="modal fade" id="bannerEdit" tabindex="-1" role="dialog" aria-labelledby="bannerEditLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">{{editOrAddObj.Id?'编辑':'添加'}}Banner</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal" id="bannerForm" v-on:submit.prevent="saveBanner">

                            <div class="form-group">
                                <label class="control-label col-md-3" for="Title">标题</label>
                                <div class="col-md-9">
                                    <input class="form-control text-box single-line" id="Title" name="Title" type="text" v-model="editOrAddObj.Title">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-3" for="Url">点击跳转地址</label>
                                <div class="col-md-9">
                                    <input class="form-control text-box single-line" id="Url" name="Url" type="text" v-model="editOrAddObj.Url">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-3" for="Sort">滚动顺序</label>
                                <div class="col-md-9">
                                    <input class="form-control text-box single-line" id="Sort" name="Sort" type="number" v-model="editOrAddObj.Sort" v-on:change="valid">
                                    <span class="text-danger" v-show="editOrAddObj.invalid&&editOrAddObj.invalid.Sort">滚动顺序必填</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3" for="IsDeleted">是否删除</label>
                                <div class="col-md-9">
                                    <switch-checkbox v-model="editOrAddObj.IsDeleted"></switch-checkbox>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3" for="ImageUrl">图片地址</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control text-box single-line" v-model="editOrAddObj.ImageUrl" />
                                    <upload-file></upload-file>

                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button type="submit" class="btn btn-primary" form="bannerForm">保存</button>
                    </div>
                </div>
            </div>
        </div>
        <!--popend-->
    </section>
    <!-- /.content -->
</div>
@section scripts{
<script src="~/js/pages/NewsBannerVue.js"></script>
}